<section class="trending-section mb-8 mt-8" *ngIf="trendingMovies.length > 0">
    <div class="trending-header">
        <h2 class="text-white text-2xl font-bold">Trending Movies</h2>

        <!-- Navigation Controls -->
        <div class="navigation-controls">
            <button class="nav-btn prev-btn" (click)="prevSlide()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M15 18L9 12L15 6" stroke="white" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" />
                </svg>
            </button>

            <!-- Indicator Dots -->
            <div class="slider-dots">
                <span *ngFor="let dot of dots; let i = index" [ngClass]="{'dot': true, 'active': currentSlide === i}"
                    (click)="goToSlide(i)">
                </span>
            </div>

            <button class="nav-btn next-btn" (click)="nextSlide()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M9 6L15 12L9 18" stroke="white" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" />
                </svg>
            </button>
        </div>
    </div>

    <div class="movie-slider" #movieSlider>
        <div *ngFor="let movie of trendingMovies" class="movie-item" style="position: relative;">

            <!-- Movie Card -->
            <app-movie-card [posterPath]="'https://image.tmdb.org/t/p/w500' + movie.poster_path"
                [title]="movie.title || movie.original_title">
            </app-movie-card>

            <!-- Watchlist Button -->
            <button class="watchlist-btn" (click)="toggleWatchlist(movie)">
                <ng-container *ngIf="!isInWatchlist(movie.id); else inWatchlist">
                    <!-- Plus Icon -->
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M12 5v14M5 12h14"></path>
                    </svg>
                </ng-container>
                <ng-template #inWatchlist>
                    <!-- Full Heart Icon -->
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="#E50914" stroke="#E50914" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path
                            d="M20.8 4.6c-1.4-1.4-3.6-1.4-5 0L12 8.4l-3.8-3.8c-1.4-1.4-3.6-1.4-5 0s-1.4 3.6 0 5l8.8 8.8 8.8-8.8c1.4-1.4 1.4-3.6 0-5z">
                        </path>
                    </svg>
                </ng-template>
            </button>

            <!-- Movie duration and views info -->
            <div class="movie-info">
                <div class="time-info">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <path d="M8 4V8L10.5 10.5" stroke="#808080" stroke-width="1.5" stroke-linecap="round"
                            stroke-linejoin="round" />
                        <circle cx="8" cy="8" r="6" stroke="#808080" stroke-width="1.5" />
                    </svg>
                    <span class="duration">{{ getRuntime(movie) }}</span>
                </div>

                <div class="view-info">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <path d="M8 3C3 3 1 8 1 8C1 8 3 13 8 13C13 13 15 8 15 8C15 8 13 3 8 3Z" stroke="#808080"
                            stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                        <circle cx="8" cy="8" r="2" stroke="#808080" stroke-width="1.5" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>
                    <span class="views">{{ getViews(movie) }}</span>
                </div>
            </div>

        </div>
    </div>
</section>
